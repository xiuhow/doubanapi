# ğŸ¬ è±†ç“£ç”µå½±æ•°æ®API

åŸºäºExpressçš„è±†ç“£ç”µå½±ã€ç”µè§†å‰§ã€ç»¼è‰ºã€åŠ¨ç”»æ•°æ®APIæœåŠ¡ï¼Œæ”¯æŒå¤šå¹³å°éƒ¨ç½²ã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
doubanapi/
â”œâ”€â”€ api-server.js          # ä¸»APIæœåŠ¡å™¨
â”œâ”€â”€ config.js              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ hot.js                 # è±†ç“£çˆ¬è™«æ ¸å¿ƒ
â”œâ”€â”€ vercel.json            # Verceléƒ¨ç½²é…ç½®
â”œâ”€â”€ netlify.toml           # Netlifyéƒ¨ç½²é…ç½®
â”œâ”€â”€ wrangler.toml          # Cloudflareéƒ¨ç½²é…ç½®
â”œâ”€â”€ deploy.sh              # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ example.js             # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ test_spider.js         # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ doubanapi.md           # è¯¦ç»†APIæ–‡æ¡£
â”œâ”€â”€ netlify/
â”‚   â””â”€â”€ functions/
â”‚       â””â”€â”€ api.js         # Netlifyå‡½æ•°å¤„ç†
â””â”€â”€ _functions/
    â””â”€â”€ api/
        â””â”€â”€ [[path]].js    # Cloudflareå‡½æ•°å¤„ç†
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
node api-server.js

# æµ‹è¯•API
node test_spider.js
```

### ä¸€é”®éƒ¨ç½²
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x deploy.sh

# éƒ¨ç½²åˆ°Vercelï¼ˆæ¨èï¼‰
./deploy.sh vercel

# éƒ¨ç½²åˆ°Netlify
./deploy.sh netlify

# éƒ¨ç½²åˆ°Cloudflare
./deploy.sh cloudflare
```

## ğŸŒ éƒ¨ç½²å¹³å°

### Vercelï¼ˆæ¨èï¼‰
- è‡ªåŠ¨CI/CD
- Serverlesså‡½æ•°
- å…¨çƒCDNåŠ é€Ÿ
- é…ç½®ç®€å•

### Netlify
- é™æ€ç«™ç‚¹+å‡½æ•°
- å…è´¹é¢åº¦å……è¶³
- GitHubé›†æˆ

### Cloudflare Pages
- è¾¹ç¼˜è®¡ç®—
- é«˜æ€§èƒ½
- å…è´¹å¥—é¤

## ğŸ“– APIæ–‡æ¡£

è¯¦ç»†APIæ¥å£è¯´æ˜è¯·æŸ¥çœ‹ [doubanapi.md](./doubanapi.md)

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶é…ç½®ï¼š

```env
PORT=3001
REQUEST_TIMEOUT=10000
REQUEST_RETRIES=3
```

### å¹³å°ç‰¹å®šé…ç½®
- **Vercel**: åœ¨æ§åˆ¶å°è®¾ç½®ç¯å¢ƒå˜é‡
- **Netlify**: åœ¨æ§åˆ¶å°è®¾ç½®ç¯å¢ƒå˜é‡
- **Cloudflare**: ä¿®æ”¹ `wrangler.toml`

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

- âœ… ç”µå½±æ•°æ®ï¼ˆçƒ­æ˜ ã€å£ç¢‘æ¦œã€TOP250ç­‰ï¼‰
- âœ… ç”µè§†å‰§æ•°æ®ï¼ˆçƒ­é—¨ã€TOP250ï¼‰
- âœ… ç»¼è‰ºæ•°æ®
- âœ… åŠ¨ç”»æ•°æ®
- âœ… æœç´¢åŠŸèƒ½
- âœ… ç»Ÿè®¡ä¿¡æ¯
- âœ… 30åˆ†é’Ÿç¼“å­˜
- âœ… è·¨åŸŸæ”¯æŒ
- âœ… é”™è¯¯å¤„ç†

## ğŸ›  æŠ€æœ¯æ ˆ

- **Node.js** + **Express**
- **Axios** - HTTPè¯·æ±‚
- **Cheerio** - HTMLè§£æ
- **CORS** - è·¨åŸŸæ”¯æŒ

## ğŸ“ æ³¨æ„äº‹é¡¹

1. æ•°æ®æ¥è‡ªè±†ç“£å…¬å¼€é¡µé¢ï¼Œè¯·åˆç†ä½¿ç”¨
2. å»ºè®®é…ç½®è¯·æ±‚é¢‘ç‡é™åˆ¶
3. ç”Ÿäº§ç¯å¢ƒå»ºè®®å¼€å¯å®‰å…¨ä¸­é—´ä»¶
4. è±†ç“£å¯èƒ½ä¼šé™åˆ¶è®¿é—®é¢‘ç‡

---
*æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ [å®Œæ•´APIæ–‡æ¡£](./doubanapi.md)*